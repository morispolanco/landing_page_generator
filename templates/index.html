<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Impulsa Landing - Generador Inteligente</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style> /* Estilos loader AI */ .ai-loader{display:none;margin-left:10px;font-size:.9em;color:var(--primary-color);vertical-align:middle}.ai-loader i{animation:fa-spin 1.5s infinite linear}.ai-button{margin-top:-2px;margin-left:10px;font-size:.85em!important;padding:.3rem .7rem!important;vertical-align:middle;line-height:1.4}form label{display:inline-block}form .form-group>textarea,form .form-group>input:not([type=color]),form .form-group>select{display:block;width:100%}</style>
</head>
<body>
    <div class="container form-container">
        <header class="form-header">
            <h1>Impulsa Landing <i class="fas fa-rocket"></i></h1>
            <p>Rellena los campos (춰recordaremos tu 칰ltima sesi칩n!) para generar tu p치gina.</p>
        </header>

        <!-- form_data contiene los datos de la 칰ltima sesi칩n -->
        <form method="POST" action="/">

            <fieldset>
                <legend><i class="fas fa-info-circle"></i> Informaci칩n B치sica</legend>
                <div class="form-group">
                    <label for="page_type">1. Tipo de P치gina:</label>
                    <select id="page_type" name="page_type" required>
                        {# Usa form_data para pre-seleccionar la opci칩n guardada #}
                        <option value="personal" {% if form_data.get('page_type') == 'personal' %}selected{% endif %}>游녻 Personal</option>
                        <option value="empresarial" {% if form_data.get('page_type', 'empresarial') == 'empresarial' %}selected{% endif %}>游끽 Empresarial</option> {# Default empresarial si no hay nada #}
                    </select>
                </div>
                <div class="form-group">
                    <label for="name">2. Nombre:</label>
                    {# Usa form_data para pre-rellenar el valor #}
                    <input type="text" id="name" name="name" placeholder="Ej: Ana Garc칤a / Soluciones Tech" required value="{{ form_data.get('name', '') }}">
                </div>
            </fieldset>

            <fieldset>
                 <legend><i class="fas fa-bullhorn"></i> Mensaje Principal</legend>
                 <div class="form-group">
                    <label for="headline">3. Titular Principal:</label>
                    <input type="text" id="headline" name="headline" placeholder="Ej: Dise침o webs que convierten" required maxlength="120" value="{{ form_data.get('headline', '') }}">
                    <small>El gancho principal.</small>
                </div>
                <div class="form-group">
                    <label for="description">4. Descripci칩n:</label>
                    {# Textarea usa contenido entre etiquetas #}
                    <textarea id="description" name="description" rows="4" placeholder="Explica qu칠 ofreces...">{{ form_data.get('description', '') }}</textarea>
                </div>
                 <div class="form-group">
                    <label for="cta_text">5. Texto del Bot칩n (CTA):</label>
                    <input type="text" id="cta_text" name="cta_text" placeholder="Ej: Reg칤strate Gratis" required value="{{ form_data.get('cta_text', '') }}">
                    <small>La acci칩n principal.</small>
                </div>
            </fieldset>

            <fieldset>
                 <legend><i class="fas fa-star"></i> Caracter칤sticas <span class="optional">(Opcional)</span></legend>
                 <div class="form-group">
                    <label for="features">6. Lista de Caracter칤sticas:</label>
                    <button type="button" class="btn btn-secondary btn-sm ai-button" id="fill-features-ai" title="Rellenar con IA"><i class="fas fa-magic"></i> IA</button>
                    <span class="ai-loader" id="loader-features"><i class="fas fa-spinner"></i></span>
                    <textarea id="features" name="features" rows="5" placeholder="icono:T칤tulo:Descripci칩n (uno por l칤nea)">{{ form_data.get('features_raw', '') }}</textarea>
                    <small>Iconos de <a href='https://fontawesome.com/search?m=free&o=r' target='_blank'>Font Awesome</a>.</small>
                 </div>
            </fieldset>

            <fieldset>
                 <legend><i class="fas fa-comments"></i> Testimonios <span class="optional">(Opcional)</span></legend>
                 <div class="form-group">
                    <label for="testimonials">7. Testimonios:</label>
                    <button type="button" class="btn btn-secondary btn-sm ai-button" id="fill-testimonials-ai" title="Rellenar con IA"><i class="fas fa-magic"></i> IA</button>
                    <span class="ai-loader" id="loader-testimonials"><i class="fas fa-spinner"></i></span>
                    <textarea id="testimonials" name="testimonials" rows="5" placeholder='"Cita." - Nombre, Cargo (uno por l칤nea)'>{{ form_data.get('testimonials_raw', '') }}</textarea>
                    <small>Generados por IA son ficticios.</small>
                 </div>
            </fieldset>

            <fieldset>
                 <legend><i class="fas fa-briefcase"></i> Portafolio <span class="optional">(Opcional)</span></legend>
                 <div class="form-group">
                    <label for="portfolio_items">8. Proyectos del Portafolio:</label>
                    <textarea id="portfolio_items" name="portfolio_items" rows="6" placeholder="URL_Imagen | T칤tulo | Descripci칩n | URL_Enlace (opcional)
Un proyecto por l칤nea.">{{ form_data.get('portfolio_raw', '') }}</textarea>
                    <small>Usa URLs p칰blicas para las im치genes. Separa campos con `|`.</small>
                 </div>
            </fieldset>

            <fieldset>
                 <legend><i class="fas fa-palette"></i> Dise침o y Contacto</legend>
                 <div class="form-group">
                    <label for="logo_style">9. Estilo del Logo:</label>
                    <select id="logo_style" name="logo_style">
                        <option value="text" {% if form_data.get('logo_style', 'text') == 'text' %}selected{% endif %}>Texto</option>
                        <option value="initials" {% if form_data.get('logo_style') == 'initials' %}selected{% endif %}>Iniciales</option>
                    </select>
                 </div>
                 <div class="form-group">
                    <label for="logo_shape">Forma Logo:</label>
                    <select id="logo_shape" name="logo_shape">
                        <option value="none" {% if form_data.get('logo_shape', 'none') == 'none' %}selected{% endif %}>Sin fondo</option>
                        <option value="circle" {% if form_data.get('logo_shape') == 'circle' %}selected{% endif %}>C칤rculo</option>
                        <option value="square" {% if form_data.get('logo_shape') == 'square' %}selected{% endif %}>Cuadrado</option>
                    </select>
                    <small>Texto usa color secundario si hay fondo.</small>
                 </div>
                 <div class="form-group">
                    <label for="hero_background_type">10. Fondo Hero:</label>
                    <select id="hero_background_type" name="hero_background_type">
                        <option value="color" {% if form_data.get('hero_background_type', 'color') == 'color' %}selected{% endif %}>Color Primario</option>
                        <option value="gradient" {% if form_data.get('hero_background_type') == 'gradient' %}selected{% endif %}>Gradiente</option>
                        <option value="pattern" {% if form_data.get('hero_background_type') == 'pattern' %}selected{% endif %}>Patr칩n SVG</option>
                        <option value="image_url" {% if form_data.get('hero_background_type') == 'image_url' %}selected{% endif %}>Imagen URL</option>
                    </select>
                 </div>
                 <div class="form-group" id="hero_pattern_options" style="display: none;">
                    <label for="hero_pattern_style">Estilo Patr칩n:</label>
                    <select id="hero_pattern_style" name="hero_pattern_style">
                        <option value="waves" {% if form_data.get('hero_pattern_style', 'waves') == 'waves' %}selected{% endif %}>Ondas</option>
                        <option value="dots" {% if form_data.get('hero_pattern_style') == 'dots' %}selected{% endif %}>Puntos</option>
                        <option value="lines" {% if form_data.get('hero_pattern_style') == 'lines' %}selected{% endif %}>L칤neas</option>
                        <option value="triangles" {% if form_data.get('hero_pattern_style') == 'triangles' %}selected{% endif %}>Tri치ngulos</option>
                    </select>
                 </div>
                 <div class="form-group" id="hero_image_url_option" style="display: none;">
                    <label for="image_hero_url">URL Imagen Hero:</label>
                    <input type="url" id="image_hero_url" name="image_hero_url" placeholder="https://ejemplo.com/imagen.jpg" value="{{ form_data.get('image_hero_url', '') }}">
                 </div>
                 <div class="form-group color-picker-group">
                    <label for="color_primary">11. Color Principal:</label>
                    <input type="color" id="color_primary" name="color_primary" value="{{ form_data.get('color_primary', '#007bff') }}">
                    <small>Botones, etc.</small>
                 </div>
                 <div class="form-group color-picker-group">
                    <label for="color_secondary">12. Color Secundario:</label>
                    <input type="color" id="color_secondary" name="color_secondary" value="{{ form_data.get('color_secondary', '#ffffff') }}">
                    <small>Texto/acentos.</small>
                 </div>
                 <div class="form-group">
                    <label for="contact_email">13. Email Contacto:</label>
                    <input type="email" id="contact_email" name="contact_email" placeholder="tu@email.com" required value="{{ form_data.get('contact_email', '') }}">
                 </div>
                 <div class="form-group">
                    <label for="contact_phone">14. Tel칠fono: <span class="optional">(Opcional)</span></label>
                    <input type="tel" id="contact_phone" name="contact_phone" placeholder="+34 ..." value="{{ form_data.get('contact_phone', '') }}">
                 </div>
                 <div class="form-group">
                    <label for="social_links">15. Redes Sociales: <span class="optional">(Opcional)</span></label>
                    <textarea id="social_links" name="social_links" rows="3" placeholder="URL por l칤nea">{{ form_data.get('social_links_raw', '') }}</textarea>
                 </div>
            </fieldset>

            <button type="submit" class="btn btn-primary btn-submit"><i class="fas fa-wand-magic-sparkles"></i> Generar Landing Page Elegante</button>
        </form>

        <footer class="form-footer">
            <p>춸 {{ current_year }} Impulsa Landing (Demo).</p>
        </footer>
    </div> <!-- /container -->

    <!-- Script JS (sin cambios) -->
    <script>const bgTypeSelect=document.getElementById('hero_background_type');const patternOptions=document.getElementById('hero_pattern_options');const imageUrlOption=document.getElementById('hero_image_url_option');function toggleHeroOptions(){const t=bgTypeSelect.value;patternOptions.style.display=t==='pattern'?'block':'none';imageUrlOption.style.display=t==='image_url'?'block':'none';}bgTypeSelect.addEventListener('change',toggleHeroOptions);toggleHeroOptions();const headlineInput=document.getElementById('headline');const descriptionInput=document.getElementById('description');const featuresTextarea=document.getElementById('features');const testimonialsTextarea=document.getElementById('testimonials');const fillFeaturesBtn=document.getElementById('fill-features-ai');const fillTestimonialsBtn=document.getElementById('fill-testimonials-ai');const loaderFeatures=document.getElementById('loader-features');const loaderTestimonials=document.getElementById('loader-testimonials');async function callAI(fieldType,btn,loader,textarea){const h=headlineInput.value.trim();const d=descriptionInput.value.trim();if(!h||!d){alert('Introduce T칤tulo y Descripci칩n para usar IA.');return;}loader.style.display='inline-block';btn.disabled=true;try{const r=await fetch("{{url_for('generate_ai_content')}}",{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({headline:h,description:d,field_type:fieldType})});const result=await r.json();if(r.ok){textarea.value=result.generated_content||'';}else{console.error("Error API:",result.error);alert(`Error IA: ${result.error||'?'}`);}}catch(e){console.error('Fetch Error:',e);alert('Error conexi칩n IA.');}finally{loader.style.display='none';btn.disabled=false;}}if(fillFeaturesBtn)fillFeaturesBtn.addEventListener('click',()=>callAI('features',fillFeaturesBtn,loaderFeatures,featuresTextarea));if(fillTestimonialsBtn)fillTestimonialsBtn.addEventListener('click',()=>callAI('testimonials',fillTestimonialsBtn,loaderTestimonials,testimonialsTextarea));</script>

</body>
</html><!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Impulsa Landing - Generador Inteligente</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style> /* Estilos loader AI */ .ai-loader{display:none;margin-left:10px;font-size:.9em;color:var(--primary-color);vertical-align:middle}.ai-loader i{animation:fa-spin 1.5s infinite linear}.ai-button{margin-top:-2px;margin-left:10px;font-size:.85em!important;padding:.3rem .7rem!important;vertical-align:middle;line-height:1.4}form label{display:inline-block}form .form-group>textarea,form .form-group>input:not([type=color]),form .form-group>select{display:block;width:100%}</style>
</head>
<body>
    <div class="container form-container">
        <header class="form-header">
            <h1>Impulsa Landing <i class="fas fa-rocket"></i></h1>
            <p>Rellena los campos (춰recordaremos tu 칰ltima sesi칩n!) para generar tu p치gina.</p>
        </header>

        <!-- form_data contiene los datos de la 칰ltima sesi칩n -->
        <form method="POST" action="/">

            <fieldset>
                <legend><i class="fas fa-info-circle"></i> Informaci칩n B치sica</legend>
                <div class="form-group">
                    <label for="page_type">1. Tipo de P치gina:</label>
                    <select id="page_type" name="page_type" required>
                        {# Usa form_data para pre-seleccionar la opci칩n guardada #}
                        <option value="personal" {% if form_data.get('page_type') == 'personal' %}selected{% endif %}>游녻 Personal</option>
                        <option value="empresarial" {% if form_data.get('page_type', 'empresarial') == 'empresarial' %}selected{% endif %}>游끽 Empresarial</option> {# Default empresarial si no hay nada #}
                    </select>
                </div>
                <div class="form-group">
                    <label for="name">2. Nombre:</label>
                    {# Usa form_data para pre-rellenar el valor #}
                    <input type="text" id="name" name="name" placeholder="Ej: Ana Garc칤a / Soluciones Tech" required value="{{ form_data.get('name', '') }}">
                </div>
            </fieldset>

            <fieldset>
                 <legend><i class="fas fa-bullhorn"></i> Mensaje Principal</legend>
                 <div class="form-group">
                    <label for="headline">3. Titular Principal:</label>
                    <input type="text" id="headline" name="headline" placeholder="Ej: Dise침o webs que convierten" required maxlength="120" value="{{ form_data.get('headline', '') }}">
                    <small>El gancho principal.</small>
                </div>
                <div class="form-group">
                    <label for="description">4. Descripci칩n:</label>
                    {# Textarea usa contenido entre etiquetas #}
                    <textarea id="description" name="description" rows="4" placeholder="Explica qu칠 ofreces...">{{ form_data.get('description', '') }}</textarea>
                </div>
                 <div class="form-group">
                    <label for="cta_text">5. Texto del Bot칩n (CTA):</label>
                    <input type="text" id="cta_text" name="cta_text" placeholder="Ej: Reg칤strate Gratis" required value="{{ form_data.get('cta_text', '') }}">
                    <small>La acci칩n principal.</small>
                </div>
            </fieldset>

            <fieldset>
                 <legend><i class="fas fa-star"></i> Caracter칤sticas <span class="optional">(Opcional)</span></legend>
                 <div class="form-group">
                    <label for="features">6. Lista de Caracter칤sticas:</label>
                    <button type="button" class="btn btn-secondary btn-sm ai-button" id="fill-features-ai" title="Rellenar con IA"><i class="fas fa-magic"></i> IA</button>
                    <span class="ai-loader" id="loader-features"><i class="fas fa-spinner"></i></span>
                    <textarea id="features" name="features" rows="5" placeholder="icono:T칤tulo:Descripci칩n (uno por l칤nea)">{{ form_data.get('features_raw', '') }}</textarea>
                    <small>Iconos de <a href='https://fontawesome.com/search?m=free&o=r' target='_blank'>Font Awesome</a>.</small>
                 </div>
            </fieldset>

            <fieldset>
                 <legend><i class="fas fa-comments"></i> Testimonios <span class="optional">(Opcional)</span></legend>
                 <div class="form-group">
                    <label for="testimonials">7. Testimonios:</label>
                    <button type="button" class="btn btn-secondary btn-sm ai-button" id="fill-testimonials-ai" title="Rellenar con IA"><i class="fas fa-magic"></i> IA</button>
                    <span class="ai-loader" id="loader-testimonials"><i class="fas fa-spinner"></i></span>
                    <textarea id="testimonials" name="testimonials" rows="5" placeholder='"Cita." - Nombre, Cargo (uno por l칤nea)'>{{ form_data.get('testimonials_raw', '') }}</textarea>
                    <small>Generados por IA son ficticios.</small>
                 </div>
            </fieldset>

            <fieldset>
                 <legend><i class="fas fa-briefcase"></i> Portafolio <span class="optional">(Opcional)</span></legend>
                 <div class="form-group">
                    <label for="portfolio_items">8. Proyectos del Portafolio:</label>
                    <textarea id="portfolio_items" name="portfolio_items" rows="6" placeholder="URL_Imagen | T칤tulo | Descripci칩n | URL_Enlace (opcional)
Un proyecto por l칤nea.">{{ form_data.get('portfolio_raw', '') }}</textarea>
                    <small>Usa URLs p칰blicas para las im치genes. Separa campos con `|`.</small>
                 </div>
            </fieldset>

            <fieldset>
                 <legend><i class="fas fa-palette"></i> Dise침o y Contacto</legend>
                 <div class="form-group">
                    <label for="logo_style">9. Estilo del Logo:</label>
                    <select id="logo_style" name="logo_style">
                        <option value="text" {% if form_data.get('logo_style', 'text') == 'text' %}selected{% endif %}>Texto</option>
                        <option value="initials" {% if form_data.get('logo_style') == 'initials' %}selected{% endif %}>Iniciales</option>
                    </select>
                 </div>
                 <div class="form-group">
                    <label for="logo_shape">Forma Logo:</label>
                    <select id="logo_shape" name="logo_shape">
                        <option value="none" {% if form_data.get('logo_shape', 'none') == 'none' %}selected{% endif %}>Sin fondo</option>
                        <option value="circle" {% if form_data.get('logo_shape') == 'circle' %}selected{% endif %}>C칤rculo</option>
                        <option value="square" {% if form_data.get('logo_shape') == 'square' %}selected{% endif %}>Cuadrado</option>
                    </select>
                    <small>Texto usa color secundario si hay fondo.</small>
                 </div>
                 <div class="form-group">
                    <label for="hero_background_type">10. Fondo Hero:</label>
                    <select id="hero_background_type" name="hero_background_type">
                        <option value="color" {% if form_data.get('hero_background_type', 'color') == 'color' %}selected{% endif %}>Color Primario</option>
                        <option value="gradient" {% if form_data.get('hero_background_type') == 'gradient' %}selected{% endif %}>Gradiente</option>
                        <option value="pattern" {% if form_data.get('hero_background_type') == 'pattern' %}selected{% endif %}>Patr칩n SVG</option>
                        <option value="image_url" {% if form_data.get('hero_background_type') == 'image_url' %}selected{% endif %}>Imagen URL</option>
                    </select>
                 </div>
                 <div class="form-group" id="hero_pattern_options" style="display: none;">
                    <label for="hero_pattern_style">Estilo Patr칩n:</label>
                    <select id="hero_pattern_style" name="hero_pattern_style">
                        <option value="waves" {% if form_data.get('hero_pattern_style', 'waves') == 'waves' %}selected{% endif %}>Ondas</option>
                        <option value="dots" {% if form_data.get('hero_pattern_style') == 'dots' %}selected{% endif %}>Puntos</option>
                        <option value="lines" {% if form_data.get('hero_pattern_style') == 'lines' %}selected{% endif %}>L칤neas</option>
                        <option value="triangles" {% if form_data.get('hero_pattern_style') == 'triangles' %}selected{% endif %}>Tri치ngulos</option>
                    </select>
                 </div>
                 <div class="form-group" id="hero_image_url_option" style="display: none;">
                    <label for="image_hero_url">URL Imagen Hero:</label>
                    <input type="url" id="image_hero_url" name="image_hero_url" placeholder="https://ejemplo.com/imagen.jpg" value="{{ form_data.get('image_hero_url', '') }}">
                 </div>
                 <div class="form-group color-picker-group">
                    <label for="color_primary">11. Color Principal:</label>
                    <input type="color" id="color_primary" name="color_primary" value="{{ form_data.get('color_primary', '#007bff') }}">
                    <small>Botones, etc.</small>
                 </div>
                 <div class="form-group color-picker-group">
                    <label for="color_secondary">12. Color Secundario:</label>
                    <input type="color" id="color_secondary" name="color_secondary" value="{{ form_data.get('color_secondary', '#ffffff') }}">
                    <small>Texto/acentos.</small>
                 </div>
                 <div class="form-group">
                    <label for="contact_email">13. Email Contacto:</label>
                    <input type="email" id="contact_email" name="contact_email" placeholder="tu@email.com" required value="{{ form_data.get('contact_email', '') }}">
                 </div>
                 <div class="form-group">
                    <label for="contact_phone">14. Tel칠fono: <span class="optional">(Opcional)</span></label>
                    <input type="tel" id="contact_phone" name="contact_phone" placeholder="+34 ..." value="{{ form_data.get('contact_phone', '') }}">
                 </div>
                 <div class="form-group">
                    <label for="social_links">15. Redes Sociales: <span class="optional">(Opcional)</span></label>
                    <textarea id="social_links" name="social_links" rows="3" placeholder="URL por l칤nea">{{ form_data.get('social_links_raw', '') }}</textarea>
                 </div>
            </fieldset>

            <button type="submit" class="btn btn-primary btn-submit"><i class="fas fa-wand-magic-sparkles"></i> Generar Landing Page Elegante</button>
        </form>

        <footer class="form-footer">
            <p>춸 {{ current_year }} Impulsa Landing (Demo).</p>
        </footer>
    </div> <!-- /container -->

    <!-- Script JS (sin cambios) -->
    <script>const bgTypeSelect=document.getElementById('hero_background_type');const patternOptions=document.getElementById('hero_pattern_options');const imageUrlOption=document.getElementById('hero_image_url_option');function toggleHeroOptions(){const t=bgTypeSelect.value;patternOptions.style.display=t==='pattern'?'block':'none';imageUrlOption.style.display=t==='image_url'?'block':'none';}bgTypeSelect.addEventListener('change',toggleHeroOptions);toggleHeroOptions();const headlineInput=document.getElementById('headline');const descriptionInput=document.getElementById('description');const featuresTextarea=document.getElementById('features');const testimonialsTextarea=document.getElementById('testimonials');const fillFeaturesBtn=document.getElementById('fill-features-ai');const fillTestimonialsBtn=document.getElementById('fill-testimonials-ai');const loaderFeatures=document.getElementById('loader-features');const loaderTestimonials=document.getElementById('loader-testimonials');async function callAI(fieldType,btn,loader,textarea){const h=headlineInput.value.trim();const d=descriptionInput.value.trim();if(!h||!d){alert('Introduce T칤tulo y Descripci칩n para usar IA.');return;}loader.style.display='inline-block';btn.disabled=true;try{const r=await fetch("{{url_for('generate_ai_content')}}",{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({headline:h,description:d,field_type:fieldType})});const result=await r.json();if(r.ok){textarea.value=result.generated_content||'';}else{console.error("Error API:",result.error);alert(`Error IA: ${result.error||'?'}`);}}catch(e){console.error('Fetch Error:',e);alert('Error conexi칩n IA.');}finally{loader.style.display='none';btn.disabled=false;}}if(fillFeaturesBtn)fillFeaturesBtn.addEventListener('click',()=>callAI('features',fillFeaturesBtn,loaderFeatures,featuresTextarea));if(fillTestimonialsBtn)fillTestimonialsBtn.addEventListener('click',()=>callAI('testimonials',fillTestimonialsBtn,loaderTestimonials,testimonialsTextarea));</script>

</body>
</html>
